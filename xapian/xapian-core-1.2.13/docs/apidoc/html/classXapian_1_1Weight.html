<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Xapian: API Documentation: xapian-core: Xapian::Weight Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.5.9 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceXapian.html">Xapian</a>::<a class="el" href="classXapian_1_1Weight.html">Weight</a>
  </div>
</div>
<div class="contents">
<h1>Xapian::Weight Class Reference</h1><!-- doxytag: class="Xapian::Weight" -->Abstract base class for weighting schemes.  
<a href="#_details">More...</a>
<p>
<div class="dynheader">
Inheritance diagram for Xapian::Weight:</div>
<div class="dynsection">
<p><center><img src="classXapian_1_1Weight__inherit__graph.png" border="0" usemap="#Xapian_1_1Weight__inherit__map" alt="Inheritance graph"></center>
<map name="Xapian_1_1Weight__inherit__map">
<area shape="rect" href="classXapian_1_1BM25Weight.html" title="Xapian::Weight subclass implementing the BM25 probabilistic formula." alt="" coords="5,84,155,111"><area shape="rect" href="classXapian_1_1BoolWeight.html" title="Class implementing a &quot;boolean&quot; weighting scheme." alt="" coords="179,84,320,111"><area shape="rect" href="classXapian_1_1TradWeight.html" title="Xapian::Weight subclass implementing the traditional probabilistic formula." alt="" coords="344,84,483,111"></map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center></div>

<p>
<a href="classXapian_1_1Weight-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#dcc0dd3e0c762597e89720043440a0bd">~Weight</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Virtual destructor, because we have virtual methods.  <a href="#dcc0dd3e0c762597e89720043440a0bd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classXapian_1_1Weight.html">Weight</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#5663bb152f93f08dcc07e0b4a39ddbc3">clone</a> () const =0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clone this object.  <a href="#5663bb152f93f08dcc07e0b4a39ddbc3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#afd3b445fb1955aae3d7c32aae3ba7b4">name</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the name of this weighting scheme.  <a href="#afd3b445fb1955aae3d7c32aae3ba7b4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#cf568da52a87e6a6786400dbd0a79edf">serialise</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return this object's parameters serialised as a single string.  <a href="#cf568da52a87e6a6786400dbd0a79edf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classXapian_1_1Weight.html">Weight</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#031c3e0db3ae50e801b324e71a44c140">unserialise</a> (const std::string &amp;s) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unserialise parameters.  <a href="#031c3e0db3ae50e801b324e71a44c140"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="namespaceXapian.html#cac12803afc9e24ee5141c119acb8884">Xapian::weight</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#8c6beb18e2c08cbc2ae61ec9d808ed9e">get_sumpart</a> (<a class="el" href="namespaceXapian.html#72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a> wdf, <a class="el" href="namespaceXapian.html#72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a> doclen) const =0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate the weight contribution for this object's term to a document.  <a href="#8c6beb18e2c08cbc2ae61ec9d808ed9e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="namespaceXapian.html#cac12803afc9e24ee5141c119acb8884">Xapian::weight</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#f37e797fa12bb915f73b20b953a132b7">get_maxpart</a> () const =0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return an upper bound on what <a class="el" href="classXapian_1_1Weight.html#8c6beb18e2c08cbc2ae61ec9d808ed9e" title="Calculate the weight contribution for this object&#39;s term to a document.">get_sumpart()</a> can return for any document.  <a href="#f37e797fa12bb915f73b20b953a132b7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="namespaceXapian.html#cac12803afc9e24ee5141c119acb8884">Xapian::weight</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#8c29b15b875e5666ac8b94c9a39e962f">get_sumextra</a> (<a class="el" href="namespaceXapian.html#72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a> doclen) const =0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate the term-independent weight component for a document.  <a href="#8c29b15b875e5666ac8b94c9a39e962f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="namespaceXapian.html#cac12803afc9e24ee5141c119acb8884">Xapian::weight</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#ca641ecc2f5645666820f864d243f46d">get_maxextra</a> () const =0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return an upper bound on what <a class="el" href="classXapian_1_1Weight.html#8c29b15b875e5666ac8b94c9a39e962f" title="Calculate the term-independent weight component for a document.">get_sumextra()</a> can return for any document.  <a href="#ca641ecc2f5645666820f864d243f46d"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#e3c11f1d2d96a18e0eb9b9b31c5c5479">stat_flags</a> </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stats which the weighting scheme can use (see <em><a class="el" href="classXapian_1_1Weight.html#77b1424d5f5a5b2d4848175979da6475" title="Tell Xapian that your subclass will want a particular statistic.">need_stat()</a></em>). <br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#77b1424d5f5a5b2d4848175979da6475">need_stat</a> (<a class="el" href="classXapian_1_1Weight.html#e3c11f1d2d96a18e0eb9b9b31c5c5479">stat_flags</a> flag)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tell <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> that your subclass will want a particular statistic.  <a href="#77b1424d5f5a5b2d4848175979da6475"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#71cd77c24183e837313ec13d967ddf2c">init</a> (double factor)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allow the subclass to perform any initialisation it needs to.  <a href="#71cd77c24183e837313ec13d967ddf2c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#a7acc105949dcb3b8b343a598dd01487">Weight</a> (const <a class="el" href="classXapian_1_1Weight.html">Weight</a> &amp;)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Don't allow copying.  <a href="#a7acc105949dcb3b8b343a598dd01487"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="48e8f4d351f2a090bcec111513833e0f"></a><!-- doxytag: member="Xapian::Weight::Weight" ref="48e8f4d351f2a090bcec111513833e0f" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#48e8f4d351f2a090bcec111513833e0f">Weight</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default constructor, needed by subclass constructors. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a2e23f50f21b1bc185f90b1e9cb7a7f3"></a><!-- doxytag: member="Xapian::Weight::get_collection_size" ref="a2e23f50f21b1bc185f90b1e9cb7a7f3" args="() const " -->
<a class="el" href="namespaceXapian.html#7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#a2e23f50f21b1bc185f90b1e9cb7a7f3">get_collection_size</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of documents in the collection. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8a8cce67a8493930d450b7146ef7579d"></a><!-- doxytag: member="Xapian::Weight::get_rset_size" ref="8a8cce67a8493930d450b7146ef7579d" args="() const " -->
<a class="el" href="namespaceXapian.html#7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#8a8cce67a8493930d450b7146ef7579d">get_rset_size</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of documents marked as relevant. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="918940bab1dc710ecb97da04f5fa6385"></a><!-- doxytag: member="Xapian::Weight::get_average_length" ref="918940bab1dc710ecb97da04f5fa6385" args="() const " -->
<a class="el" href="namespaceXapian.html#63b13d3a36fcab9975658e32643d86b5">Xapian::doclength</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#918940bab1dc710ecb97da04f5fa6385">get_average_length</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The average length of a document in the collection. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="92938b9a4e06cc4064d175678cbf89db"></a><!-- doxytag: member="Xapian::Weight::get_termfreq" ref="92938b9a4e06cc4064d175678cbf89db" args="() const " -->
<a class="el" href="namespaceXapian.html#7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#92938b9a4e06cc4064d175678cbf89db">get_termfreq</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of documents which this term indexes. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1e6c2200a16fe2ed1631e498b0938de8"></a><!-- doxytag: member="Xapian::Weight::get_reltermfreq" ref="1e6c2200a16fe2ed1631e498b0938de8" args="() const " -->
<a class="el" href="namespaceXapian.html#7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#1e6c2200a16fe2ed1631e498b0938de8">get_reltermfreq</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of relevant documents which this term indexes. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="346c098a7aa0e4834a2d0289f2095bec"></a><!-- doxytag: member="Xapian::Weight::get_query_length" ref="346c098a7aa0e4834a2d0289f2095bec" args="() const " -->
<a class="el" href="namespaceXapian.html#72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#346c098a7aa0e4834a2d0289f2095bec">get_query_length</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The length of the query. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="764637daf40de00c390c2248fb0d9669"></a><!-- doxytag: member="Xapian::Weight::get_wqf" ref="764637daf40de00c390c2248fb0d9669" args="() const " -->
<a class="el" href="namespaceXapian.html#72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#764637daf40de00c390c2248fb0d9669">get_wqf</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The within-query-frequency of this term. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespaceXapian.html#72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#6fdebced528afecf5709eb94aae8a03b">get_doclength_upper_bound</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">An upper bound on the maximum length of any document in the database.  <a href="#6fdebced528afecf5709eb94aae8a03b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespaceXapian.html#72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#e7174b4c8b66f72f8d7a8086ca4fb476">get_doclength_lower_bound</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A lower bound on the minimum length of any document in the database.  <a href="#e7174b4c8b66f72f8d7a8086ca4fb476"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespaceXapian.html#72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1Weight.html#ed86f1d362deac4a1492480ca28c788f">get_wdf_upper_bound</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">An upper bound on the wdf of this term.  <a href="#ed86f1d362deac4a1492480ca28c788f"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Abstract base class for weighting schemes. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="dcc0dd3e0c762597e89720043440a0bd"></a><!-- doxytag: member="Xapian::Weight::~Weight" ref="dcc0dd3e0c762597e89720043440a0bd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual Xapian::Weight::~Weight           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Virtual destructor, because we have virtual methods. 
<p>

</div>
</div><p>
<a class="anchor" name="a7acc105949dcb3b8b343a598dd01487"></a><!-- doxytag: member="Xapian::Weight::Weight" ref="a7acc105949dcb3b8b343a598dd01487" args="(const Weight &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Xapian::Weight::Weight           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classXapian_1_1Weight.html">Weight</a> &amp;&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Don't allow copying. 
<p>
This would ideally be private, but that causes a compilation error with GCC 4.1 (which appears to be a bug). 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="5663bb152f93f08dcc07e0b4a39ddbc3"></a><!-- doxytag: member="Xapian::Weight::clone" ref="5663bb152f93f08dcc07e0b4a39ddbc3" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classXapian_1_1Weight.html">Weight</a>* Xapian::Weight::clone           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Clone this object. 
<p>
This method allocates and returns a copy of the object it is called on.<p>
If your subclass is called FooWeight and has parameters a and b, then you would implement FooWeight::clone() like so:<p>
FooWeight * FooWeight::clone() const { return new FooWeight(a, b); }<p>
Note that the returned object will be deallocated by <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> after use with "delete". If you want to handle the deletion in a special way (for example when wrapping the <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> API for use from another language) then you can define a static <code>operator delete</code> method in your subclass as shown here: <a href="http://trac.xapian.org/ticket/554#comment:1">http://trac.xapian.org/ticket/554#comment:1</a> 
</div>
</div><p>
<a class="anchor" name="e7174b4c8b66f72f8d7a8086ca4fb476"></a><!-- doxytag: member="Xapian::Weight::get_doclength_lower_bound" ref="e7174b4c8b66f72f8d7a8086ca4fb476" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceXapian.html#72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a> Xapian::Weight::get_doclength_lower_bound           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A lower bound on the minimum length of any document in the database. 
<p>
This bound does not include any zero-length documents.<p>
This should only be used by <a class="el" href="classXapian_1_1Weight.html#f37e797fa12bb915f73b20b953a132b7" title="Return an upper bound on what get_sumpart() can return for any document.">get_maxpart()</a> and <a class="el" href="classXapian_1_1Weight.html#ca641ecc2f5645666820f864d243f46d" title="Return an upper bound on what get_sumextra() can return for any document.">get_maxextra()</a>. 
</div>
</div><p>
<a class="anchor" name="6fdebced528afecf5709eb94aae8a03b"></a><!-- doxytag: member="Xapian::Weight::get_doclength_upper_bound" ref="6fdebced528afecf5709eb94aae8a03b" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceXapian.html#72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a> Xapian::Weight::get_doclength_upper_bound           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
An upper bound on the maximum length of any document in the database. 
<p>
This should only be used by <a class="el" href="classXapian_1_1Weight.html#f37e797fa12bb915f73b20b953a132b7" title="Return an upper bound on what get_sumpart() can return for any document.">get_maxpart()</a> and <a class="el" href="classXapian_1_1Weight.html#ca641ecc2f5645666820f864d243f46d" title="Return an upper bound on what get_sumextra() can return for any document.">get_maxextra()</a>. 
</div>
</div><p>
<a class="anchor" name="ca641ecc2f5645666820f864d243f46d"></a><!-- doxytag: member="Xapian::Weight::get_maxextra" ref="ca641ecc2f5645666820f864d243f46d" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespaceXapian.html#cac12803afc9e24ee5141c119acb8884">Xapian::weight</a> Xapian::Weight::get_maxextra           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return an upper bound on what <a class="el" href="classXapian_1_1Weight.html#8c29b15b875e5666ac8b94c9a39e962f" title="Calculate the term-independent weight component for a document.">get_sumextra()</a> can return for any document. 
<p>
This information is used by the matcher to perform various optimisations, so strive to make the bound as tight as possible. 
<p>Implemented in <a class="el" href="classXapian_1_1BoolWeight.html#8332b9fa9cb900d273f8077f76c94fcc">Xapian::BoolWeight</a>, <a class="el" href="classXapian_1_1BM25Weight.html#7c91481891313e089eb38bf1a9a83029">Xapian::BM25Weight</a>, and <a class="el" href="classXapian_1_1TradWeight.html#5e06ecfe3f4ad59c4e1a651f604800e2">Xapian::TradWeight</a>.</p>

</div>
</div><p>
<a class="anchor" name="f37e797fa12bb915f73b20b953a132b7"></a><!-- doxytag: member="Xapian::Weight::get_maxpart" ref="f37e797fa12bb915f73b20b953a132b7" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespaceXapian.html#cac12803afc9e24ee5141c119acb8884">Xapian::weight</a> Xapian::Weight::get_maxpart           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return an upper bound on what <a class="el" href="classXapian_1_1Weight.html#8c6beb18e2c08cbc2ae61ec9d808ed9e" title="Calculate the weight contribution for this object&#39;s term to a document.">get_sumpart()</a> can return for any document. 
<p>
This information is used by the matcher to perform various optimisations, so strive to make the bound as tight as possible. 
<p>Implemented in <a class="el" href="classXapian_1_1BoolWeight.html#9edd11c7c0c6d3fc72c347f1bd65bb3c">Xapian::BoolWeight</a>, <a class="el" href="classXapian_1_1BM25Weight.html#f23907adc06e73cdf1228fc616a2fda2">Xapian::BM25Weight</a>, and <a class="el" href="classXapian_1_1TradWeight.html#bc2fd38d6abbb7ef77b14959ae3f1fc0">Xapian::TradWeight</a>.</p>

</div>
</div><p>
<a class="anchor" name="8c29b15b875e5666ac8b94c9a39e962f"></a><!-- doxytag: member="Xapian::Weight::get_sumextra" ref="8c29b15b875e5666ac8b94c9a39e962f" args="(Xapian::termcount doclen) const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespaceXapian.html#cac12803afc9e24ee5141c119acb8884">Xapian::weight</a> Xapian::Weight::get_sumextra           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceXapian.html#72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a>&nbsp;</td>
          <td class="paramname"> <em>doclen</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Calculate the term-independent weight component for a document. 
<p>
The parameter gives information about the document which may be used in the calculations:<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>doclen</em>&nbsp;</td><td>The document's length (unnormalised). </td></tr>
  </table>
</dl>

<p>Implemented in <a class="el" href="classXapian_1_1BoolWeight.html#44d22ac1bafc6290d2877fb972e4f5f3">Xapian::BoolWeight</a>, <a class="el" href="classXapian_1_1BM25Weight.html#6992ef2cd23a095d607b70aa2076850b">Xapian::BM25Weight</a>, and <a class="el" href="classXapian_1_1TradWeight.html#c6f5746b1117b331a42e1bdc4002d65e">Xapian::TradWeight</a>.</p>

</div>
</div><p>
<a class="anchor" name="8c6beb18e2c08cbc2ae61ec9d808ed9e"></a><!-- doxytag: member="Xapian::Weight::get_sumpart" ref="8c6beb18e2c08cbc2ae61ec9d808ed9e" args="(Xapian::termcount wdf, Xapian::termcount doclen) const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespaceXapian.html#cac12803afc9e24ee5141c119acb8884">Xapian::weight</a> Xapian::Weight::get_sumpart           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceXapian.html#72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a>&nbsp;</td>
          <td class="paramname"> <em>wdf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceXapian.html#72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a>&nbsp;</td>
          <td class="paramname"> <em>doclen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Calculate the weight contribution for this object's term to a document. 
<p>
The parameters give information about the document which may be used in the calculations:<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>wdf</em>&nbsp;</td><td>The within document frequency of the term in the document. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>doclen</em>&nbsp;</td><td>The document's length (unnormalised). </td></tr>
  </table>
</dl>

<p>Implemented in <a class="el" href="classXapian_1_1BoolWeight.html#9e9cac485fad3353044f4a5aa5813f6c">Xapian::BoolWeight</a>, <a class="el" href="classXapian_1_1BM25Weight.html#4fe48617e7db67232208a00b94878f54">Xapian::BM25Weight</a>, and <a class="el" href="classXapian_1_1TradWeight.html#fd3432ac3e0adab5b7c4ad61d2ced18d">Xapian::TradWeight</a>.</p>

</div>
</div><p>
<a class="anchor" name="ed86f1d362deac4a1492480ca28c788f"></a><!-- doxytag: member="Xapian::Weight::get_wdf_upper_bound" ref="ed86f1d362deac4a1492480ca28c788f" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceXapian.html#72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a> Xapian::Weight::get_wdf_upper_bound           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
An upper bound on the wdf of this term. 
<p>
This should only be used by <a class="el" href="classXapian_1_1Weight.html#f37e797fa12bb915f73b20b953a132b7" title="Return an upper bound on what get_sumpart() can return for any document.">get_maxpart()</a> and <a class="el" href="classXapian_1_1Weight.html#ca641ecc2f5645666820f864d243f46d" title="Return an upper bound on what get_sumextra() can return for any document.">get_maxextra()</a>. 
</div>
</div><p>
<a class="anchor" name="71cd77c24183e837313ec13d967ddf2c"></a><!-- doxytag: member="Xapian::Weight::init" ref="71cd77c24183e837313ec13d967ddf2c" args="(double factor)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Xapian::Weight::init           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>factor</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Allow the subclass to perform any initialisation it needs to. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>factor</em>&nbsp;</td><td>Any scaling factor (e.g. from OP_SCALE_WEIGHT). If the <a class="el" href="classXapian_1_1Weight.html" title="Abstract base class for weighting schemes.">Weight</a> object is for the term-independent weight supplied by <a class="el" href="classXapian_1_1Weight.html#8c29b15b875e5666ac8b94c9a39e962f" title="Calculate the term-independent weight component for a document.">get_sumextra()</a>/get_maxextra(), then init(0.0) is called (starting from <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> 1.2.11 and 1.3.1 - earlier versions failed to call <a class="el" href="classXapian_1_1Weight.html#71cd77c24183e837313ec13d967ddf2c" title="Allow the subclass to perform any initialisation it needs to.">init()</a> for such <a class="el" href="classXapian_1_1Weight.html" title="Abstract base class for weighting schemes.">Weight</a> objects). </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="afd3b445fb1955aae3d7c32aae3ba7b4"></a><!-- doxytag: member="Xapian::Weight::name" ref="afd3b445fb1955aae3d7c32aae3ba7b4" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string Xapian::Weight::name           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the name of this weighting scheme. 
<p>
This name is used by the remote backend. It is passed along with the serialised parameters to the remote server so that it knows which class to create.<p>
Return the full namespace-qualified name of your class here - if your class is called FooWeight, return "FooWeight" from this method (<a class="el" href="classXapian_1_1BM25Weight.html" title="Xapian::Weight subclass implementing the BM25 probabilistic formula.">Xapian::BM25Weight</a> returns "Xapian::BM25Weight" here).<p>
If you don't want to support the remote backend, you can use the default implementation which simply returns an empty string. 
<p>Reimplemented in <a class="el" href="classXapian_1_1BoolWeight.html#c91b3673317ee9574dff4321482f579d">Xapian::BoolWeight</a>, <a class="el" href="classXapian_1_1BM25Weight.html#943fdc83495a97f7d6af1208f5b26052">Xapian::BM25Weight</a>, and <a class="el" href="classXapian_1_1TradWeight.html#a34538148bb8a2771675117d7331aee1">Xapian::TradWeight</a>.</p>

</div>
</div><p>
<a class="anchor" name="77b1424d5f5a5b2d4848175979da6475"></a><!-- doxytag: member="Xapian::Weight::need_stat" ref="77b1424d5f5a5b2d4848175979da6475" args="(stat_flags flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Xapian::Weight::need_stat           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classXapian_1_1Weight.html#e3c11f1d2d96a18e0eb9b9b31c5c5479">stat_flags</a>&nbsp;</td>
          <td class="paramname"> <em>flag</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Tell <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> that your subclass will want a particular statistic. 
<p>
Some of the statistics can be costly to fetch or calculate, so <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> needs to know which are actually going to be used. You should call <a class="el" href="classXapian_1_1Weight.html#77b1424d5f5a5b2d4848175979da6475" title="Tell Xapian that your subclass will want a particular statistic.">need_stat()</a> from your constructor for each such statistic.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>flag</em>&nbsp;</td><td>The stat_flags value for a required statistic. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="cf568da52a87e6a6786400dbd0a79edf"></a><!-- doxytag: member="Xapian::Weight::serialise" ref="cf568da52a87e6a6786400dbd0a79edf" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string Xapian::Weight::serialise           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return this object's parameters serialised as a single string. 
<p>
If you don't want to support the remote backend, you can use the default implementation which simply throws <a class="el" href="classXapian_1_1UnimplementedError.html" title="UnimplementedError indicates an attempt to use an unimplemented feature.">Xapian::UnimplementedError</a>. 
<p>Reimplemented in <a class="el" href="classXapian_1_1BoolWeight.html#06e88787161cc2146511259d5742dd10">Xapian::BoolWeight</a>, <a class="el" href="classXapian_1_1BM25Weight.html#2dd2eb60deb5690e471d68f4c7fc3203">Xapian::BM25Weight</a>, and <a class="el" href="classXapian_1_1TradWeight.html#3cb90ec9c8ef2866dfa405d3490d4cc3">Xapian::TradWeight</a>.</p>

</div>
</div><p>
<a class="anchor" name="031c3e0db3ae50e801b324e71a44c140"></a><!-- doxytag: member="Xapian::Weight::unserialise" ref="031c3e0db3ae50e801b324e71a44c140" args="(const std::string &amp;s) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classXapian_1_1Weight.html">Weight</a>* Xapian::Weight::unserialise           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Unserialise parameters. 
<p>
This method unserialises parameters serialised by the <em><a class="el" href="classXapian_1_1Weight.html#cf568da52a87e6a6786400dbd0a79edf" title="Return this object&#39;s parameters serialised as a single string.">serialise()</a></em> method and allocates and returns a new object initialised with them.<p>
If you don't want to support the remote backend, you can use the default implementation which simply throws <a class="el" href="classXapian_1_1UnimplementedError.html" title="UnimplementedError indicates an attempt to use an unimplemented feature.">Xapian::UnimplementedError</a>.<p>
Note that the returned object will be deallocated by <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> after use with "delete". If you want to handle the deletion in a special way (for example when wrapping the <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> API for use from another language) then you can define a static <code>operator delete</code> method in your subclass as shown here: <a href="http://trac.xapian.org/ticket/554#comment:1">http://trac.xapian.org/ticket/554#comment:1</a><p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>A string containing the serialised parameters. </td></tr>
  </table>
</dl>

<p>Reimplemented in <a class="el" href="classXapian_1_1BoolWeight.html#729a7656e41663f612d0ae871d02c518">Xapian::BoolWeight</a>, <a class="el" href="classXapian_1_1BM25Weight.html#8a9f0c48f4229aa0d62feff5f496dc78">Xapian::BM25Weight</a>, and <a class="el" href="classXapian_1_1TradWeight.html#ce5aae016fc57407c7f7f5f0f3d7b5c0">Xapian::TradWeight</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>xapian/<a class="el" href="weight_8h.html">weight.h</a></ul>
</div>
<hr>
<address><small>
Documentation for Xapian (version 1.2.13).<br>
Generated on 9 Jan 2013 by
<a href="http://www.doxygen.org/">Doxygen 1.5.9</a>.
</small></address>
</body>
</html>
